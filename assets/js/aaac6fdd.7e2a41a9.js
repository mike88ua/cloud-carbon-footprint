"use strict";(self.webpackChunkwww_cloudcarbonfootprint_org=self.webpackChunkwww_cloudcarbonfootprint_org||[]).push([[734],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return f}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),l=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=l(e.components);return r.createElement(c.Provider,{value:t},e.children)},g="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),g=l(n),d=a,f=g["".concat(c,".").concat(d)]||g[d]||p[d]||o;return n?r.createElement(f,i(i({ref:t},u),{},{components:n})):r.createElement(f,i({ref:t},u))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[g]="string"==typeof e?e:a,i[1]=s;for(var l=2;l<o;l++)i[l]=n[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},9760:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return i},default:function(){return g},frontMatter:function(){return o},metadata:function(){return s},toc:function(){return l}});var r=n(3117),a=(n(7294),n(3905));const o={id:"tagging",title:"Tagging",slug:"/tagging",sidebar_position:3},i=void 0,s={unversionedId:"ConfigurationOptions/tagging",id:"ConfigurationOptions/tagging",title:"Tagging",description:"Sometimes it may be necessary to organize your data in ways that will allow for better breakdown and visibility across specific organizations, teams, applications, or shared resources. Cloud providers allow for this organization through tagging of resources, both custom tags and CSP assigned tags in key/value pairs.",source:"@site/docs/ConfigurationOptions/Tagging.md",sourceDirName:"ConfigurationOptions",slug:"/tagging",permalink:"/docs/tagging",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{id:"tagging",title:"Tagging",slug:"/tagging",sidebar_position:3},sidebar:"defaultSidebar",previous:{title:"Performance Considerations",permalink:"/docs/performance-considerations"},next:{title:"Configurations Glossary",permalink:"/docs/configurations-glossary"}},c={},l=[{value:"A Note on AWS Tagging Conventions",id:"a-note-on-aws-tagging-conventions",level:3},{value:"Filtering Estimates by Tags via API",id:"filtering-estimates-by-tags-via-api",level:2}],u={toc:l};function g(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Sometimes it may be necessary to organize your data in ways that will allow for better breakdown and visibility across specific organizations, teams, applications, or shared resources. Cloud providers allow for this organization through tagging of resources, both custom tags and CSP assigned tags in key/value pairs. "),(0,a.kt)("p",null,"CCF supports the capturing of these tags as part of resource metadata and filtering of cached results via an API parameter. Currently tagging support is limited to AWS and those using MongoDB, and filtering data based on tag is only possible when directly querying the API."),(0,a.kt)("p",null,"By including resource tags in the data retrieved from cloud providers and then filtering to estimate energy and carbon only for specific tags, you can get a better sense of carbon as it relates to your business contexts, org structure, applications, etc. With this information, you can potentially better target areas to focus and optimize."),(0,a.kt)("p",null,"Example: Specifying ",(0,a.kt)("inlineCode",{parentName:"p"},'AWS_RESOURCE_TAG_NAMES=["user:Environment", \u201caws:createdBy\u201d]')," in your API or CLI ",(0,a.kt)("inlineCode",{parentName:"p"},".env")," file will include the corresponding tag values for each AWS resource in the results:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-JSON"},'{\n "cloudProvider": "AWS",\n "kilowattHours": 9.17,\n "co2e": 2.064,\n "usesAverageCPUConstant": true,\n "serviceName": "AWSLambda",\n "accountId": "1234567890",\n "accountName": "example-account",\n "region": "eu-west-2",\n "cost": 0.0000238,\n "tags": {\n   "user:Environment": "production",\n   \u201cuser:Production\u201d: \u201cIAMUser:example-user\u201d,\n }\n}\n')),(0,a.kt)("h3",{id:"a-note-on-aws-tagging-conventions"},"A Note on AWS Tagging Conventions"),(0,a.kt)("p",null,"The AWS Cost and Usage Reporting (CUR) translates tag names to names that are valid Athena column names. On top of this, it also adds a prefix to distinguish between user-created tags and AWS-internal tags. While not documented, we have found that a tag such as SourceRepository will be user:SourceRepository in CUR, and resource_tags_user_source_repository in Athena (AWS-internal tags will be prefixed with aws: instead of user: in CUR).\nTo include a list of resource tags for AWS, you must set the AWS_RESOURCE_TAG_NAMES.\nExample:\nAWS_RESOURCE_TAG_NAMES=",'["user:Environment", "aws:CreatedBy"]'),(0,a.kt)("p",null,"For more information on AWS tags, you can refer to the ",(0,a.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/general/latest/gr/aws_tagging.html"},"official AWS tagging documentation"),"."),(0,a.kt)("h2",{id:"filtering-estimates-by-tags-via-api"},"Filtering Estimates by Tags via API"),(0,a.kt)("p",null,"Once tags have been included in the data cached in MongoDB, you can filter the data retrieved from the API by specifying the desired tag via API parameter. For more details, please visit the ",(0,a.kt)("a",{parentName:"p",href:"/docs/data-persistence-and-caching/#filtering-estimates"},"Filtering Estimates")," section of the ",(0,a.kt)("a",{parentName:"p",href:"/docs/data-persistence-and-caching"},"Data Persistence and Caching")," page."))}g.isMDXComponent=!0}}]);